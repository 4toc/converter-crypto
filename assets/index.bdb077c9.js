import{u as y,r as R,c as _,o as l,a as u,b as a,t as d,F as S,d as k,e as m,f as g,w as T,n as U,g as i,h as $,i as b,j as f,k as D}from"./vendor.ebdddd09.js";const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerpolicy&&(o.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?o.credentials="include":c.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(c){if(c.ep)return;c.ep=!0;const o=r(c);fetch(c.href,o)}};E();const I=["onClick"],O={class:"dropdown__select"},w={key:0,class:"dropdown__menu"},F=["onClick"],V={props:{selectedCode:String},emits:["selectItem"],setup(e,{emit:t}){const r=e,s=y(),c=R(!1),o=_(()=>s.getters.getCurrencyList),n=v=>{t("selectItem",v)},C=()=>{c.value=!c.value};return(v,Z)=>(l(),u("div",{class:"dropdown",onClick:T(C,["stop"])},[a("div",O,[a("span",null,d(r.selectedCode),1)]),c.value?(l(),u("ul",w,[(l(!0),u(S,null,k(m(o),p=>(l(),u("li",{key:p.code,class:U(["dropdown__li",{"dropdown__li--active":r.selectedCode===p.code}]),onClick:ee=>n(p.code)},d(p.code),11,F))),128))])):g("",!0)],8,I))}};const A={class:"convert-item"},B={class:"convert-item__info"},N={class:"convert-item__title"},L={key:0,class:"convert-item__my"},x={class:"convert-item__controls"},H={class:"convert-item__select-wrapper"},M={class:"convert-item__input"},j=["value"],h={props:{title:{type:String,default:""},showMyAmount:{type:Boolean,default:!1},selectedCurrency:{type:Object,default:()=>({})},selectedCurrencyOrder:{type:Number,default:0}},setup(e){const t=e,r=y(),s=_(()=>r.state.currencyValue[t.selectedCurrencyOrder]),c=n=>{r.commit("setValue",{index:t.selectedCurrencyOrder,value:Number(n.target.value)}),r.commit("makeCorrelationFromIndex",t.selectedCurrencyOrder)},o=n=>{r.commit("setCurrencyFromCode",{code:n,index:t.selectedCurrencyOrder}),r.dispatch("fetchRate").then(()=>{r.commit("makeCorrelationFromIndex",t.selectedCurrencyOrder)})};return(n,C)=>(l(),u("div",A,[a("div",B,[a("h6",N,d(t.title),1),t.showMyAmount?(l(),u("span",L,d(t.selectedCurrency.myAmount)+" "+d(t.selectedCurrency.code),1)):g("",!0)]),a("div",x,[a("div",H,[i(V,{selectedCode:t.selectedCurrency.code,onSelectItem:o},null,8,["selectedCode"])]),a("div",M,[a("input",{type:"number",value:m(s),onInput:c},null,40,j)])])]))}};const P={class:"convert-rate"},q=a("div",{class:"convert-rate__title"},"Rate:",-1),z={class:"convert-rate__total"},K={setup(e){const t=y(),r=_(()=>t.getters.getTotalNumber);return(s,c)=>(l(),u("div",P,[q,a("div",z,d(m(r))+"$",1)]))}};const G={class:"convert-popup"},J={setup(e){const t=y();t.commit("setCurrencyFromCode",{code:"USD",index:0}),t.commit("setCurrencyFromCode",{code:"EUR",index:1}),t.dispatch("fetchRate");const r=_(()=>t.state.selectedCurrency[0]),s=_(()=>t.state.selectedCurrency[1]);return(c,o)=>(l(),u("div",G,[i(h,{title:"Amount i have",showMyAmount:!0,selectedCurrencyOrder:0,selectedCurrency:m(r)},null,8,["selectedCurrency"]),i(h,{title:"I need",selectedCurrencyOrder:1,selectedCurrency:m(s)},null,8,["selectedCurrency"]),i(K)]))}};const Q={class:"main-page"},W={setup(e){return(t,r)=>(l(),u("div",Q,[i(J)]))}};const X={setup(e){return(t,r)=>(l(),$(W))}},Y=b({state:{currencyList:[{code:"USD",myAmount:3745,value:0},{code:"EUR",myAmount:453,value:0},{code:"BTC",myAmount:4,value:0},{code:"ETH",myAmount:22,value:0}],selectedCurrency:[{},{}],currencyValue:[0,0],total:0,rate:1,rateCode:"",isFromFirstToSecond:!0,rateUSD:1},getters:{getCurrencyList(e){return e.currencyList},getCurrencyFromIndex(e){return e.selectedCurrency[0]},getTotalNumber(e){return(e.currencyValue[0]*e.rateUSD*1.01).toFixed(2)}},mutations:{setCurrencyFromCode(e,t){e.selectedCurrency[t.index]=e.currencyList.find(r=>r.code===t.code)},setValue(e,t){e.currencyValue[t.index]=t.value},makeCorrelationFromIndex(e,t){const r=t===0?1:0;e.selectedCurrency[r].code===e.rateCode?e.currencyValue[r]=e.currencyValue[t]*e.rate:e.currencyValue[r]=e.currencyValue[t]/e.rate},setRate(e,t){e.rate=t},setRateCode(e,t){e.rateCode=t},setRateUSD(e,t){e.rateUSD=t}},actions:{fetchRate(e){if(e.state.selectedCurrency[0].code===e.state.selectedCurrency[1].code){e.commit("setRate",1);return}if(e.state.selectedCurrency[0].code&&e.state.selectedCurrency[1].code){const t=e.state.selectedCurrency[0].code,r=e.state.selectedCurrency[1].code;let s="";return["EUR","USD"].includes(t)&&["EUR","USD"].includes(r)?(s="EURUSD",e.commit("setRateCode",t==="EUR"?"EUR":"USD")):t==="BTC"?(s="TBTC"+r,e.commit("setRateCode","BTC")):r==="BTC"?(s="TBTC"+t,e.commit("setRateCode",t)):t==="ETH"?(s="ETH"+r,e.commit("setRateCode","ETH")):r==="ETH"&&(s="ETH"+t,e.commit("setRateCode",t)),f.get(`https://api.kraken.com/0/public/Ticker?pair=${s}`).then(c=>{c.data.result&&(e.commit("setRate",Number(Object.values(c.data.result)[0].a[0])),e.dispatch("fetchRateUSD"))}).catch(c=>{console.log("Error",c)})}},fetchRateUSD(e){const t=e.state.selectedCurrency[0].code==="BTC"?"TBTC":e.state.selectedCurrency[0].code;f.get(`https://api.kraken.com/0/public/Ticker?pair=${t}USD`).then(r=>{r.data.result&&e.commit("setRateUSD",Number(Object.values(r.data.result)[0].a[0]))})}}});D(X).use(Y).mount("#app");
